(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9947:function(e,t,r){Promise.resolve().then(r.bind(r,7870))},7870:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var i=r(7437),a=r(2265),o=r(8472),n=r(8355),l=r.n(n);let s="matchprop_local";function d(){try{let e=localStorage.getItem(s);if(!e)return{lastValuations:[],favorites:[],comparables:[]};return JSON.parse(e)}catch(e){return{lastValuations:[],favorites:[],comparables:[]}}}function c(e){localStorage.setItem(s,JSON.stringify(e))}let u={pushValuation(e){let t=d();return t.lastValuations=[e,...t.lastValuations].slice(0,10),c(t),t},addFavorite(e){let t=d();return t.favorites=[e,...t.favorites].slice(0,50),c(t),t},setComparables(e){let t=d();return t.comparables=e,c(t),t},read:d};var p=r(7501);let m="https://scary-zombie-7gqw7qwx65qcrjj4-8000.app.github.dev";function h(){let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(null),[s,d]=(0,a.useState)([]),[c,h]=(0,a.useState)(u.read());async function v(e){let r;e.preventDefault();let i=new FormData(e.currentTarget),a={property_type:String(i.get("property_type")||"depto"),covered_m2:Number(i.get("covered_m2")||0),uncovered_m2:Number(i.get("uncovered_m2")||0),neighborhood:String(i.get("neighborhood")||"")};m?{data:r}=await o.Z.post("".concat(m,"/api/v1/valuate"),a):r=function(e){var t;let r=(e.neighborhood||"").toLowerCase(),i=e.covered_m2+.5*e.uncovered_m2,a=Math.round(2200*(null!==(t=({palermo:1.35,recoleta:1.3,belgrano:1.25,caballito:1.1,almagro:1.05,flores:.95,villaurquiza:1.05})[r])&&void 0!==t?t:1));return{estimate_usd:Math.max(0,Math.round(i*a)),usd_per_m2:a,confidence:"demo",inputs:e}}(a),t(r),h(u.pushValuation({input:a,output:r}))}async function b(e){var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;let i=await new Promise((e,t)=>{l().parse(r,{header:!0,skipEmptyLines:!0,transformHeader:e=>e.trim(),complete:t=>{e(t.data.map(e=>{var t,r,i,a,o,n,l,s,d,c,u,p,m;return{id:null===(r=e.id)||void 0===r?void 0:null===(t=r.trim)||void 0===t?void 0:t.call(r),barrio:null===(a=e.barrio)||void 0===a?void 0:null===(i=a.trim)||void 0===i?void 0:i.call(a),tipo:null===(n=e.tipo)||void 0===n?void 0:null===(o=n.trim)||void 0===o?void 0:o.call(n),m2_cub:Number(null!==(d=e.m2_cub)&&void 0!==d?d:0),m2_desc:Number(null!==(c=e.m2_desc)&&void 0!==c?c:0),precio_usd:Number(null!==(u=e.precio_usd)&&void 0!==u?u:0),ambientes:Number(null!==(p=e.ambientes)&&void 0!==p?p:0),antiguedad:Number(null!==(m=e.antiguedad)&&void 0!==m?m:0),amenities:null===(s=e.amenities)||void 0===s?void 0:null===(l=s.trim)||void 0===l?void 0:l.call(s)}}))},error:e=>t(e)})});d(i),h(u.setComparables(i))}(0,a.useEffect)(()=>{d(c.comparables||[])},[]);let f=(0,a.useMemo)(()=>(s.length&&(s.reduce((e,t)=>e+(t.precio_usd||0),0),s.length),s.filter(t=>null!=e&&!!e.usd_per_m2||!0).sort((e,t)=>(e.precio_usd||0)-(t.precio_usd||0)).slice(0,5)),[s,e]);return(0,i.jsxs)("main",{style:{padding:16,maxWidth:1100,margin:"0 auto"},children:[(0,i.jsx)("h1",{children:"MatchProp — MVP+"}),(0,i.jsxs)("p",{children:["Modo: ",m?"API (Codespaces/backend)":"Local (sin backend, 100% Pages)"]}),(0,i.jsxs)("section",{style:{border:"1px solid #eee",padding:16,borderRadius:12,marginTop:16},children:[(0,i.jsx)("h2",{children:"Valuaci\xf3n"}),(0,i.jsxs)("form",{onSubmit:v,style:{display:"grid",gap:8,gridTemplateColumns:"repeat(5, 1fr)"},children:[(0,i.jsx)("input",{name:"property_type",placeholder:"Tipo",defaultValue:"depto"}),(0,i.jsx)("input",{name:"covered_m2",placeholder:"m\xb2 cubiertos",type:"number",defaultValue:45}),(0,i.jsx)("input",{name:"uncovered_m2",placeholder:"m\xb2 descubiertos",type:"number",defaultValue:8}),(0,i.jsx)("input",{name:"neighborhood",placeholder:"Barrio",defaultValue:"Caballito"}),(0,i.jsx)("button",{children:"Valuar"})]}),e&&(0,i.jsxs)("div",{style:{marginTop:8},children:[(0,i.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(e,null,2)}),(0,i.jsx)("button",{onClick:function(){if(!e)return;let t=new p.ZP;t.setFontSize(14),t.text("MatchProp — Informe de Valuaci\xf3n",14,16),t.setFontSize(11),t.text("Estimado (USD): ".concat(e.estimate_usd),14,28),t.text("USD/m\xb2: ".concat(e.usd_per_m2," | Confianza: ").concat(e.confidence),14,36),t.text("Comparables cargados (top 3):",14,48),s.slice(0,3).forEach((e,r)=>{t.text("• ".concat(e.barrio||"-"," | ").concat(e.tipo||"-"," | m2:").concat(e.m2_cub," + ").concat(e.m2_desc," | USD ").concat(e.precio_usd),16,58+8*r)}),t.save("matchprop_valuacion.pdf")},children:"Exportar PDF"})]})]}),(0,i.jsxs)("section",{style:{border:"1px solid #eee",padding:16,borderRadius:12,marginTop:16},children:[(0,i.jsx)("h2",{children:"Comparables (CSV)"}),(0,i.jsx)("input",{type:"file",accept:".csv",onChange:b}),(null==f?void 0:f.length)?(0,i.jsx)("ul",{children:f.map((e,t)=>(0,i.jsxs)("li",{children:[e.barrio||"-"," | ",e.tipo||"-"," | m\xb2 ",e.m2_cub,"+",e.m2_desc," | USD ",e.precio_usd,(0,i.jsx)("button",{style:{marginLeft:8},onClick:()=>h(u.addFavorite(e)),children:"★ Fav"})]},t))}):(0,i.jsx)("p",{style:{opacity:.7},children:"Sub\xed un CSV con columnas: id,barrio,tipo,m2_cub,m2_desc,precio_usd,ambientes,antiguedad,amenities"})]}),(0,i.jsxs)("section",{style:{border:"1px solid #eee",padding:16,borderRadius:12,marginTop:16},children:[(0,i.jsx)("h2",{children:"Favoritos / \xdaltimas valuaciones"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:"Favoritos"}),(0,i.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(c.favorites||[],null,2)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:"\xdaltimas valuaciones"}),(0,i.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:JSON.stringify(c.lastValuations||[],null,2)})]})]})]})]})}}},function(e){e.O(0,[125,505,970,971,23,744],function(){return e(e.s=9947)}),_N_E=e.O()}]);